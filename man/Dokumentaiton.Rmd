---
title: "Dokumentation"
author: "Clara Himmelbauer"
date: "2025-01-27"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Dieses File dokumentiert die Arbeitsschritte der Datenaufbereitung.

## Wahldaten und deren Aufbereitung

### Die Gemeindeergebnisse von der BMI-Seite herunterladen

- NRW 2024: https://www.bmi.gv.at/412/Nationalratswahlen/Nationalratswahl_2024/start.aspx
- NRW 2019: https://www.bmi.gv.at/412/Nationalratswahlen/Nationalratswahl_2019/start.aspx 

### Gemeindedaten aufbereiten

#### Daten 2024: `data/prep_nrw24.xlsx`
- Absolute Stimmen pro Gemeinde
- Sonstige Zusammenfassen: so = bier + mfg + bge + lmp + gaza + kp + keine
- Dasselbe mit Bezirken und Wahlkarten, man weiß nie für was wir das noch brauchen könnten!

#### Daten 2019: `data/prep_nrw19.xlsx`
- Auf Gebietsstand 2024 bringen: `man/aenderungen_gemeindenummern.xlsx`
    - 62347 Murfeld: Gemeindeteilunga auf 61060 Sankt Veit in der Südsteiermark und 61061 Straß in der Steiermark. Weil Murfeld sehr klein ist und ich nicht genau weiß wie die Gemeinde geteilt wurde (ca 17% - 83% glaub ich), wird das ignoriert
    - 61060 Sankt Veit in der Südsteiermark - GKZ geändert von 61056
    - 61061 Straß in Steiermark - GKZ geändert von 61058
    - 70370 Matrei am Brenner - Zusammenlegung von 70327 Matrei am Brenner, 70330 Mühlbachl, 70341 Pfons
- Absolute Stimmen pro Gemeinde (Gebietsstand 2024), Bezirk, Wahlkarten
- Sonstige Zusammenfassen: so = jetzt + kpö ü wandl + bzö + bier + cpö + gilt + slp

### Beispieldaten erstellen

An einem Wahltag um 17:00 schließen die Wahllokale und die Bundeswahlbehörde (oder Gemeindewahlbehörde) veröffentlicht die Ergebnisse der schon ausgezhälten Gemeinden/Sprengel. Das sind vor allem sehr kleine Gemeinden mit wenigen Wahlberechtigten. Deswegen erstelle ich einen Mock-Datensatz in dem
- Nur 300 Gemeinden ausgezahlt sind, das sind in etwa 14% aller österreichischen Gemeinden
- Alle diese Gemeinden sind sehr klein und haben weniger als 2.000 Wahlberechtigte
Die Berechnung passiert in `analysis/prep_import.R` und das Ergebnis ist `data/in_results-filtered.csv`. 

## Testhochrechnung

1. Daten zusammenkopieren
2. Ausgezählte Gemeinden filtern/danach sortieren